<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Libros</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <style>
        .container {
            padding: 20px;
        }
        h1 {
            color: #007BFF;
        }
        .book-card {
            background-color: #f7f7f7;
            border: 1px solid #e5e5e5;
            border-radius: 10px;
            padding: 15px;
            margin: 10px;
        }
        .book-image {
            max-width: 100%;
            height: auto;
        }
        .btn-reservar {
            background-color: #007BFF;
            color: #fff;
            border: none;
        }
        form {
            margin-bottom: 20px;
        }
        label, select, input, button {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-book-half" viewBox="0 0 16 16">
            <path d="M8.5 2.687c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/>
          </svg>
        <div class="container-fluid">
            <a class="navbar-brand" href="/">Biblioteca</a>
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" href="/agregarlibro">Agregar Libros</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/agregarautor">Agregar Autor</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/agregargenero">Agregar Genero</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/agregareditorial">Agregar Editorial</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <h1><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-list-task" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5H2zM3 3H2v1h1V3z"/>
            <path d="M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9z"/>
            <path fill-rule="evenodd" d="M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V7zM2 7h1v1H2V7zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5H2zm1 .5H2v1h1v-1z"/>
          </svg> Lista de Libros</h1>
        <div class="row">
            <div class="col-md-9">
                {% for libro in datos.libros %}
                <div class="book-card">
                    {%if libro[2]==0%}
                    <form action="/reserva"  method="GET">
                        <label for="usuario"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-person-arms-up" viewBox="0 0 16 16">
                            <path d="M8 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/>
                            <path d="m5.93 6.704-.846 8.451a.768.768 0 0 0 1.523.203l.81-4.865a.59.59 0 0 1 1.165 0l.81 4.865a.768.768 0 0 0 1.523-.203l-.845-8.451A1.492 1.492 0 0 1 10.5 5.5L13 2.284a.796.796 0 0 0-1.239-.998L9.634 3.84a.72.72 0 0 1-.33.235c-.23.074-.665.176-1.304.176-.64 0-1.074-.102-1.305-.176a.72.72 0 0 1-.329-.235L4.239 1.286a.796.796 0 0 0-1.24.998l2.5 3.216c.317.316.475.758.43 1.204Z"/>
                          </svg> Selecciona un Usuario:</label>
                        <select name="usuario" id="usuario" class="form-select">
                            {% for usuario in datos.usuarios %}
                                <option value="{{ usuario[0] }}">{{ usuario[1] }} {{ usuario[2] }}</option>
                            {% endfor %}
                        </select>
                        <input type="hidden" name="isbn" value="{{libro[0]}}">
                        <button type="submit" id="usuario" class="btn btn-primary btn-block"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-lg" viewBox="0 0 16 16">
                            <path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"/>
                          </svg> Reservar</button>
                    </form>
                    {%else%}
                    <a href="/reserva?isbn={{libro[0]}}" class="btn btn-primary btn-reservar float-right">Reservado</a>
                    {%endif%}
                    <h5 class="card-title">{{ libro[1] }}</h5>
                    <p><strong>ISBN:</strong> {{ libro[0] }}</p>
                </div>
                {% endfor %}
            </div>
        </div>
        <a href="/" class="btn btn-primary mt-3">Volver a la p√°gina principal</a>
    </div>
</body>
</html>